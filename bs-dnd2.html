<!DOCTYPE html>

<head>

  <title>Live Drag and Drop HTML/CSS Editor</title>


<!-- Living on the edge by referencing the github directly -->
<!-- (makes it easier to share with others, minimizing files) -->
<link href="http://johnny.github.com/jquery-sortable/css/vendor.css" rel="stylesheet">      
<link href="http://johnny.github.com/jquery-sortable/css/application.css" rel="stylesheet">
<script src="http://johnny.github.com/jquery-sortable/js/application.js"></script>
<script src="http://johnny.github.com/jquery-sortable/js/jquery-sortable-min.js"></script>
<script src="http://jscolor.com/jscolor/jscolor.js"></script>


<link href="style/bootstrap-dnd.css" rel="stylesheet">
<!--<style>
</style> -->

<script>
var old = '';
function update()
{
  var textarea = document.f.ta;
  var d = parent.dynamicpagepreview.document; 
  if (old != textarea.value)
  {
    old = textarea.value;
    d.open();
    d.write(old);
    d.close();
  }
  window.setTimeout(update, 150);
}
    
    // Code to show/hide the HTML source code div
    /* from: http://www.mkyong.com/jquery/jquery-toggle-example-to-display-and-hide-content/ */
    
$(document).ready(function() {
  $('.toggle').click(function(){
     //get collapse content selector
     var collapse_selector = $(this).attr('href');     
     //make the collapse content to be shown or hide
     var toggle_switch = $(this);
     $(collapse_selector).toggle(function(){
         //change the button label to be 'Show'
         if($(this).css('display')=='none'){
            toggle_switch.html('Show source code'); }
        //change the button label to be 'Hide'
        else { toggle_switch.html('Hide source code'); }
         });
     });
  });
</script>

</head>


<body class="" onload="update(); document.f.ta.select();">

<div>   <!--class="bootstrap-container"-->

  <div class="page-header">
    <h1>Drag-and-drop HTML Editor</h1>
  </div>

<div id="examples">


<div class="row">


<div id="left-col" class="span4">

  <!-- ****************************** ****************************** -->

    <!-- These items are draggable and clone when dropped -->

    <h3>Drag HTML elements from here </h3> 

    <div id="html-menu">
    
    <ol class="simple_with_no_drop vertical">


<!-- ==================== BUTTONS ==================== -->
<!-- ==================== LABELS ==================== -->
<!-- ==================== BADGES ==================== -->


<!-- ==================== small well ==================== -->

    <li class="bootstrap well" id="well-sm">
          <i class="icon-move"></i>
          &lt;div 
          id="<span contenteditable class="user-input text"></span>" 
          class="well well-sm<span contenteditable class="user-input text"></span>"
          &gt;
          <br>
          <span contenteditable class="user-input text">
              Look, I'm in a small well!
          </span>
          <br>
          &lt;/div&gt;
      </li>

<!-- ==================== large well ==================== -->

      <li class="bootstrap well" id="well-lg">
          <i class="icon-move"></i>
          &lt;div 
          id="<span contenteditable class="user-input text"></span>" 
          class="well well-lg<span contenteditable class="user-input text"></span>"
          &gt;
          <br>
          <span contenteditable class="user-input text">
              Look, I'm in a large well!
          </span>
          <br>
          &lt;/div&gt;
      </li>

<!-- ==================== button default ==================== -->

 <li class="bootstrap button" id="btn-default">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn btn-default 
      <span contenteditable class="user-input text"></span>
      "&gt;
      <br>
      <span contenteditable class="user-input text">
        Default button
      </span>
      <br>
      &lt;/button&gt;
</li>

<!-- ==================== button primary ==================== -->


<li class="bootstrap button" id="btn-primary">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn btn-primary 
      <span contenteditable class="user-input text"></span>
      "&gt;
      <br>
      <span contenteditable class="user-input text">
        Primary button
      </span>
      <br>
      &lt;/button&gt;
</li>

<!-- ==================== button success ==================== -->

 <li class="bootstrap button" id="btn-success">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn btn-success 
      <span contenteditable class="user-input text"></span>
      "&gt;
      <br>
      <span contenteditable class="user-input text">
        Success button
      </span>
      <br>
      &lt;/button&gt;
</li>

<!-- ==================== button info ==================== -->

       <li class="bootstrap button" id="btn-info">
            <i class="icon-move"></i> 
            &lt;button type="button"
            class="btn btn-info 
            <span contenteditable class="user-input text"></span>
            "&gt;
            <br>
            <span contenteditable class="user-input text">
              Info button
            </span>
            <br>
            &lt;/button&gt;
      </li>

<!-- ==================== button warning ==================== -->

 <li class="bootstrap button" id="btn-warning">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn btn-warning 
      <span contenteditable class="user-input text"></span>
      "&gt;
      <br>
      <span contenteditable class="user-input text">
        Warning button
      </span>
      <br>
      &lt;/button&gt;
</li>

<!-- ==================== button danger ==================== -->

 <li class="bootstrap button" id="btn-danger">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn btn-danger 
      <span contenteditable class="user-input text"></span>
      "&gt;
      <br>
      <span contenteditable class="user-input text">
        Danger button
      </span>
      <br>
      &lt;/button&gt;
</li>



<!-- ==================== button link ==================== -->

 <li class="bootstrap button" id="btn-link">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn btn-link 
      <span contenteditable class="user-input text"></span>
      "&gt;
      <br>
      <span contenteditable class="user-input text">
        Link button
      </span>
      <br>
      &lt;/button&gt;
</li> 







<!-- ==================== label default ==================== 
  label as class not okay here  -->

 <li class="bootstrap button" id="label-default">
      <i class="icon-move"></i> 
      &lt;span
      class="label label-default 
      <span contenteditable class="user-input text"></span>
      "&gt;

      <span contenteditable class="user-input text">
        Default label
      </span>

      &lt;/span&gt;
</li>  


<!-- ==================== label primary ==================== -->

 <li class="bootstrap button" id="label-primary">
      <i class="icon-move"></i> 
      &lt;span
      class="label label-primary 
      <span contenteditable class="user-input text"></span>
      "&gt;

      <span contenteditable class="user-input text">
        Primary label
      </span>

      &lt;/span&gt;
</li> 


<!-- ==================== label success ==================== -->

 <li class="bootstrap button" id="label-success">
      <i class="icon-move"></i> 
      &lt;span
      class="label label-success 
      <span contenteditable class="user-input text"></span>
      "&gt;

      <span contenteditable class="user-input text">
        Success label
      </span>

      &lt;/span&gt;
</li> 


<!-- ==================== label info ==================== -->

 <li class="bootstrap button" id="label-info">
      <i class="icon-move"></i> 
      &lt;span
      class="label label-info 
      <span contenteditable class="user-input text"></span>
      "&gt;

      <span contenteditable class="user-input text">
        Info label
      </span>

      &lt;/span&gt;
</li> 


<!-- ==================== label warning ==================== -->

 <li class="bootstrap button" id="label-warning">
      <i class="icon-move"></i> 
      &lt;span
      class="label label-warning 
      <span contenteditable class="user-input text"></span>
      "&gt;

      <span contenteditable class="user-input text">
        Warning label
      </span>

      &lt;/span&gt;
</li> 


<!-- ==================== label danger ==================== -->

 <li class="bootstrap button" id="label-danger">
      <i class="icon-move"></i> 
      &lt;span
      class="label label-danger 
      <span contenteditable class="user-input text"></span>
      "&gt;

      <span contenteditable class="user-input text">
        Danger label
      </span>

      &lt;/span&gt;
</li> 

<!-- ====================  default ==================== -->
<!-- ====================  primary ==================== -->
<!-- ====================  success ==================== -->
<!-- ====================  info ==================== -->
<!-- ====================  warning ==================== -->
<!-- ====================  danger ==================== -->

<!--span class="label label-default">Default</span>
<span class="label label-primary">Primary</span>
<span class="label label-success">Success</span>
<span class="label label-info">Info</span>
<span class="label label-warning">Warning</span>
<span class="label label-danger">Danger</span-->

















      </ol>
    </div>

</div> <!-- end left-col -->



<div id="middle-col">    





    
<!-- ---------- HTML DRAG AND DROP WORKSPACE ---------- -->

<div id="html-dnd-workspace"><!--span4--> <!--class="span5"-->

  <h3>Drag and drop to create your page</h3>

  <ol class="simple_with_drop vertical" id="workspace">

    <li class="">
      &lt;head&gt;

      <ol>
        <li class="">
          &lt;!--
          <span class="user-input htmlcomment" contenteditable="">
            Bootstrap core CSS
          </span>
          --&gt;

                    <ol>
                        <li class="">&lt;link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet"&gt;</li>
                    </ol>
                </li>

                <li>
                    &lt;style&gt; 
                    <ol>
                        <li class="highlight css-el">
                          body {
                            <ol>
                                <li class="highlight css-prop">
                                background-color: 
                                 <span class="user-input color"
                                contenteditable="">#B2FFFF</span>;
                              </li>

                                <li class="highlight css-prop">
                                color:<span class="user-input color"
                                contenteditable="">indigo</span>;
                              </li>
                            </ol>
                          }
                        </li>

                        <li class="highlight css-el">
                          .<span class= "user-input idname" contenteditable="">feature</span> {
                            <ol>
                                <li class="highlight css-prop">
                                background-color:<span class=
                                "user-input bgcolor" contenteditable=
                                "">lightgrey</span>;</li>

                               
                            </ol>}
                        </li>

                        

                        

                       
                    </ol>
                    &lt;/style&gt;
                </li>


                                <li class="" id="html-comment">
                  &lt;!-- Bootstrap core JavaScript
                ================================================== --&gt;
                <br>
                &lt;!-- Placed at the end of the document so the pages load faster --&gt;
                <br>

                    
                        <!--li class="script"-->
                          &lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"&gt;&lt;/script&gt;

                          &lt;script src="http://getbootstrap.com/dist/js/bootstrap.js"&gt;&lt;/script&gt;
                        <!--/li -->
                    
                </li>

            </ol>
            &lt;/head&gt;<br>
        
        <!--</li>

        <li class="" >
            <!--i class="icon-move"></i-->

            &lt;body&gt;

            <ol>
                




                

<li class="bootstrap">
  &lt;h1&gt;
  <span class="user-input heading" contenteditable="">
    Welcome!
  </span>
  &lt;/h1&gt;
</li>



<li class="bootstrap">
  <i class="icon-move"></i> 
  &lt;div
  class="dropdown<span contenteditable class="user-input text"></span>"
  &gt;




  <ol>


    <li class="bootstrap">
      <i class="icon-move"></i> 
      &lt;button type="button"
      class="btn dropdown-toggle sr-only"
      id="dropdownMenu1" data-toggle="dropdown"&gt;
      <span contenteditable class="user-input text">
        Dropdown
      </span>
      &lt;/button&gt;
    </li>
      


    <li>
      <i class="icon-move"></i>
      &lt;ul
      class="dropdown-menu" 
      role="menu" aria-labelledby="dropdownMenu1"&gt;

      <ol>

    <li>
      <i class="icon-move"></i>
      &lt;li role="presentation"
      class="dropdown-header"&gt;
      <br>
      <span class="user-input heading" contenteditable="">
        Dropdown header
      </span>
      <br>
      &lt;/li&gt;
    </li>


    <li>
      <i class="icon-move"></i>
      &lt;li role="presentation"&gt;
      <br>
      &lt;a role="menuitem" tabindex="-1" href="#"&gt;
      <span class="user-input heading" contenteditable="">
        Action
      </span>
      &lt;/a&gt;
      <br>
      &lt;/li&gt;
    </li>

    <li>
      <i class="icon-move"></i>
      &lt;li role="presentation"&gt;
      <br>
      &lt;a role="menuitem" tabindex="-1" href="#"&gt;
      <span class="user-input heading" contenteditable="">
        Another Action
      </span>
      &lt;/a&gt;
      <br>
      &lt;/li&gt;
    </li>

    <li>
      <i class="icon-move"></i>
      &lt;li role="presentation"&gt;
      <br>
      &lt;a role="menuitem" tabindex="-1" href="#"&gt;
      <span class="user-input heading" contenteditable="">
        Something else here
      </span>
      &lt;/a&gt;
      <br>
      &lt;/li&gt;
    </li>


    <li>
      <i class="icon-move"></i>
      &lt;li
      role="presentation"
      class="divider"&gt;
      &lt;/li&gt;
    </li>



    <li>
      <i class="icon-move"></i>
      &lt;li role="presentation"&gt;
      <br>
      &lt;a role="menuitem" tabindex="-1" href="#"&gt;
      <span class="user-input heading" contenteditable="">
        Separated Link
      </span>
      &lt;/a&gt;
      <br>
      &lt;/li&gt;
    </li>







      </ol>





      &lt;/ul&gt;
    </li>







  </ol>

  &lt;/div&gt;
</li>






                <li class="">
                  &lt;div 
                  id="
                  <span class="user-input text" contenteditable="">
                    left-box
                  </span>" 
                  class="
                  <span class="user-input text" contenteditable="">feature</span>"&gt;

                    <ol>
                        <li class="" style="">&lt;h2&gt;<span class=
                        "user-input heading" contenteditable="">Left
                        Content</span>&lt;/h2&gt;</li>
                    </ol>&lt;/div&gt;
                </li>

                <li class="" style="">&lt;div id="<span class="user-input text"
                    contenteditable="">center-box</span>" class="<span class=
                    "user-input text" contenteditable="">feature</span>"&gt;

                    <ol>
                        <li class="">
                          &lt;h2&gt;<span class=
                        "user-input heading" contenteditable="">Middle/Center
                        Content</span>
                        &lt;/h2&gt;
                      </li>
                    </ol>&lt;/div&gt;
                </li>

                <li class="" style="">&lt;div id="<span class="user-input text"
                    contenteditable="">right-box</span>" class="<span class=
                    "user-input text" contenteditable="">feature</span>"&gt;

                    <ol>
                        <li class="" style="">&lt;h2&gt;<span class=
                        "user-input heading" contenteditable="">Right
                        Content</span>&lt;/h2&gt;</li>
                    </ol>&lt;/div&gt;
                </li>

                


                <li class="" id="html-comment">
                  &lt;!-- Bootstrap core JavaScript
                ================================================== --&gt;
                <br>
                &lt;!-- Placed at the end of the document so the pages load faster --&gt;
                <br>

                    
                        <!--li class="script"-->
                          &lt;script
                        src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"&gt;&lt;/script&gt;

                          &lt;script
                        src="http://getbootstrap.com/dist/js/bootstrap.js"&gt;&lt;/script&gt;
                        <!--/li -->
                    
                </li>



            </ol>&lt;/body&gt;
        </li>
    </ol>





      <button href="#generated-source-code" class="toggle">Show source code</button>

    <!-- --------------- HTML SOURCE CODE --------------- -->

   <div id='generated-source-code'>  <!--style="display:none">class="span3"-->

    <h3>HTML source code</h3>

    <form name="f" method="post" target="dynamicpagepreview">

      <!-- Calls serialize on page load to general html/css source code
       to fill this text area. Updates it whenever a keyup trigger
       in elements of the user-input class. Was hardcoded before -_- -->

      <textarea id="serialize_output" name="ta" rows="10" cols="140">
      </textarea>
    </form>

      </div> <!-- end generated-source-code -->

  </div> <!--end html-dnd-workspace -->
    
</div> <!-- end middle-col -->

  <div id="right-col" class="span5">
  
    <!-- ---------- WEB PAGE OUTPUT ---------- -->

<h3>Web page preview</h3>
<iframe name="dynamicpagepreview" id="dynamicpagepreview" src="javascript:'-'"></iframe>

</div> <!-- end right-col -->
</div> <!-- end row -->
<!--/div--> <!-- end examples  not sure what this changes-->









<footer class="footer">
  <h5> Many thanks to the creators of these awesome things: </h5>  

  <p> Uses <a href="http://johnny.github.com/jquery-sortable/" target="_blank"> jQuery Sortable</a>
    created by <a href="https://github.com/johnny" target="_blank">Jonas von Andrian</a>.
      Built with <a href="http://twitter.github.com/bootstrap/" target="_blank">Bootstrap</a>.
      Icons from <a href="http://glyphicons.com/" target="_blank">Glyphicons Free</a>.
      <br/>
      Uses <a href="http://jscolor.com/" target="_blank">JSColor</a>.
      <br/>
      Uses functionality from <a href="http://www.onlinehtmleditor.net/">Online HTML Editor</a>.
      Website made by <a href="http://www.jimwestergren.com/" target="_blank">Jim Westergren</a>, and javascript for live edits made by <a href="http://www.squarefree.com/" target="_blank">Jesse Ruderman</a>.
  </p>
</footer>
</div> <!-- end bootstrap container -->








<script>

  /* if a contenteditable user-input class is changed,
trigger the onDrop function for the draganddrop editor,
which updates the generated sourcecode */

var group = $("ol.simple_with_drop").sortable({
//var group = $("#workspace").sortable({
    group:  'no-drop', //'simple_with_drop',
    handle: 'i.icon-move', //uncomment to make only grabbable at icon

    /* if you comment out the handle line, you can click on the entire
rectangle to move it. However, this messes up the ability to click on
contenteditable spans. */

  onDragStart: function (item, container, _super) {
    // Duplicate items of the no drop area
    if(!container.options.drop)
      item.clone().insertAfter(item)
    _super(item)
  },

  onDrop: function (item, container, _super) {
    $('#serialize_output').text(group.sortable("serialize").get().join(""))
    _super(item, container)
  },
  serialize: function (parent, children, isContainer) {
    return isContainer ? children.join() : parent.text()
  }
})

/* if any change happens in an element of .user-input class,
call the onDrop function,
which triggers the generated HTML source code to update,
which then automatically updates the web page preview */

  // on keystroke changes, update the generated html source code!
  // aka call serialize
$('.user-input').live("keyup",function(){
$('#serialize_output').text(group.sortable("serialize").get().join(""))
})

    /* still can't figure out how to only get the selected value of a select
     dropdown to serialize, and not the other options... or hte value of an input
     elment*/
    
/*change for select, input, textarea elements
correctly triggers serialize function,
but still doesn't get the values of these elements  */
$('.user-input').live("change",function(){
$('#serialize_output').text(group.sortable("serialize").get().join(""))
})
    
$(document).ready(function() {
$('#serialize_output').text(group.sortable("serialize").get().join(""))
})


$("ol.simple_with_no_drag").sortable({
group: 'no-drop',
drag: false,
onDrop: function (item, container, _super) {
// DELETE THE ITEM ....???
item.dispose()
}

})

</script> 


</body>

</html>